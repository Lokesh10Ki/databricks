resources:
  apps:
    streamlit_app:
      name: "streamlit-dab"
      description: "Streamlit App that's deployed using Databricks Asset Bundles"
      source_code_path: ../src/streamlit_app
      config:
        command:
          - streamlit
          - run
          - app.py
        env:
          - name: SERVING_ENDPOINT
            valueFrom: serving-endpoint
            # value: ${resources.model_serving_endpoints.uc_model_serving_endpoint.name}
      permissions:
      - level: CAN_USE
        group_name: field-eng-only
      resources:
        - name: "serving-endpoint"
          description: "put endpoint as secret?"
          serving_endpoint:
            name: ${resources.model_serving_endpoints.uc_model_serving_endpoint.name}
            permission: "CAN_QUERY"
